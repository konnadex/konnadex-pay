(()=>{"use strict";var n={"./src/types/index.ts":
/*!****************************!*\
  !*** ./src/types/index.ts ***!
  \****************************/(e,t,n)=>{n.r(t),n.d(t,{BEARER:()=>a,BLOCKNETWORK:()=>r,CURRENCY:()=>i,ENVIRONMENT:()=>o,LIVE_BACKEND_URL:()=>c,SDK_BASE_URL:()=>p,TEST_BACKEND_URL:()=>l,supportedProps:()=>s}),(n=o=o||{}).DEVELOPMENT="DEVELOPMENT",n.PRODUCTION="PRODUCTION",n.TEST="TEST",(t=r=r||{}).BINANCE="BINANCE",t.ETHEREUM="ETHEREUM",t.POLYGON="POLYGON",(i=i||{}).USDT="USDT",(n=a=a||{}).MERCHANT="MERCHANT",n.CUSTOMER="CUSTOMER";var o,r,i,a,s=["defaultTab","cryptoCurrency","key","reference","amount","bearer","network","currency","env","metadata","theme","email","fullname","description","phone","address","extraInfo","onSuccess","onError","onClose"],c="https://api.konnadex.com/v1/collections/fiat-currency",l="https://staging.konnadex.com/v1/collections/fiat-currency",p="https://pay.konnadex.com"},"./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/(e,t,n)=>{n.r(t),n.d(t,{utils:()=>r});var o=n(/*! ./types */"./src/types/index.ts"),r=function(){var r,p=o.SDK_BASE_URL,d="konnadex-checkout-id",u="pay-widget-wrapper";function f(){r&&clearTimeout(r);var e=document.getElementById(u);document.body.removeChild(e),window.parent.document.body.style.overflow="scroll"}return{openWidget:function(){var e=document.getElementById(u),t=window.parent.document.body,n=document.getElementById("pay-app-loader"),o=document.getElementById(d);t.style.overflow="hidden",e.style.visibility="visible",e.style.display="flex",n.style.display="block",r=setTimeout(function(){var e=document.getElementById(u);e.style.display="flex",o.style.display="block",[e,o].forEach(function(e){e.style.visibility="visible",e.focus({preventScroll:!1})})},1500)},closeWidget:f,init:function(e){var t=e.title,n=e.config;document.getElementById(u)&&document.getElementById(d)&&(console.log("Closing in a bad way"),f());(e=document.createElement("style")).innerText=m,document.head.appendChild(e);var e=document.createElement("div"),o=document.createElement("div"),r=(e.setAttribute("id","pay-app-loader"),e.classList.add("app-loader"),o.classList.add("app-loader__spinner"),document.createElementNS("http://www.w3.org/2000/svg","svg"));r.setAttribute("width","44"),r.setAttribute("height","53"),r.setAttribute("viewBox","0 0 44 53"),r.setAttribute("fill","none"),(s=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M0.773438 27.0148V3.97296C0.773438 3.75857 0.9324 3.57742 1.14497 3.54957C9.59538 2.44231 14.9502 12.3499 9.39431 18.8127L1.96382 27.4561C1.5544 27.9323 0.773438 27.6428 0.773438 27.0148Z"),s.setAttribute("fill","#1141D2"),(c=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M7.83847 25.7005L27.5516 5.19924C28.414 4.30238 29.6045 3.79553 30.8487 3.79553H39.9346C41.1413 3.79553 41.7605 5.24097 40.9279 6.11446L20.4604 27.5895L41.2653 49.1939C42.0439 50.0024 41.5753 51.3528 40.4632 51.5052L33.0139 52.5262C31.5814 52.7225 30.1404 52.2299 29.1278 51.1979L12.4039 34.1521V48.344C12.4039 49.2746 12.2521 50.2403 11.6352 50.937C9.15894 53.7335 3.88868 52.9906 1.88828 50.2545C1.46316 49.673 1.35092 48.9367 1.32567 48.2168L1.14925 43.1864C0.92151 36.6928 3.3349 30.3841 7.83847 25.7005Z"),c.setAttribute("fill","#FF8300"),r.appendChild(s),r.appendChild(c),o.appendChild(r);for(var i=0;i<12;i++){var a=document.createElement("div");o.appendChild(a)}e.appendChild(o);var s=n.transfer?"".concat(p,"/wallet"):"".concat(p,"/contract"),c=new URL(s),l=((r=document.createElement("div")).setAttribute("id",u),r.setAttribute("style",y),document.body.insertBefore(r,document.body.childNodes[0]),document.getElementById(u).appendChild(e),document.createElement("iframe"));return[{key:"src",val:c.href},{key:"style",val:h},{key:"id",val:d},{key:"allowfullscreen",val:"true"},{key:"allowpaymentrequest",val:"true"},{key:"title",val:t},{key:"sandbox",val:"allow-forms allow-scripts allow-same-origin allow-top-navigation-by-user-activation allow-popups"}].forEach(function(e){var t=e.key,e=e.val;return l.setAttribute(t,e)}),l.onload=function(){l.contentWindow.postMessage({type:"konnaInitData",config:n},p)},document.getElementById(u).appendChild(l),window.closePayFrame=f,l}}},y="position:fixed;overflow: hidden;display: none;justify-content: center;align-items: center;z-index: 999999999;height: 100%;width: 100%;color: transparent;background: rgba(0,0,0,0.8);visibility:hidden;margin: 0;top:0;right:0;bottom:0;left:0;backdrop-filter: blur(2px);",h="position: fixed;display: none;overflow: hidden;z-index: 999999999;width: 100%;height: 100%;transition: opacity 0.3s ease 0s;visibility:hidden;margin: 0;top:0;right:0;bottom:0;left:0; border: none",m='.app-loader {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all 450ms ease;\n  -webki-transition: all 450ms ease;\n}\n@-webkit-keyframes app-loader__spinner {\n  0% {\n    // opacity: 1;\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    // opacity: 0;\n    -webkit-transform: rotate(0deg);\n    transform: rotate(360deg);\n  }\n}\n.app-loader__spinner {\n  position: relative;\n  display: inline-block;\n  width: fit-content;\n}\n.app-loader__spinner {\n  position: absolute;\n  z-index: 3;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  width: 100px;\n  height: 100px;\n  background: transparent;\n  border: 4px solid #EBEDF4;\n  border-radius: 50%;\n  text-align: center;\n  line-height: 120px;\n  font-family: sans-serif;\n  font-size: 20px;\n  letter-spacing: 4px;\n  text-transform: uppercase;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.app-loader__spinner:before {\n  content: "";\n  position: absolute;\n  top: -3px;\n  left: -3px;\n  width: 100%;\n  height: 100%;\n  border: 3px solid transparent;\n  border-top: 3px solid #1141D2;\n  border-right: 4px solid #1141D2;\n  border-radius: 50%;\n  animation: app-loader__spinner 1s linear infinite;\n}\n'}},o={};function r(e){var t=o[e];return void 0!==t||(t=o[e]={exports:{}},n[e](t,t.exports,r)),t.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var e={};{
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
r.r(e),r.d(e,{default:()=>u});var i=r(/*! ./types */"./src/types/index.ts"),a=r(/*! ./utils */"./src/utils.ts"),s=function(){return(s=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},t=function(e,a,s,c){return new(s=s||Promise)(function(n,t){function o(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,r)}i((c=c.apply(e,a||[])).next())})},c=function(o,r){var i,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;c=l&&t[l=0]?0:c;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=r.call(o,c)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||((o=o||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};function p(e){if(!(this instanceof p))return new p(e);var t=d(l(l([],Object.keys(e),!0),Object.keys(null!=(t=e.metadata)?t:{}),!0),i.supportedProps);if(t.length)throw new Error("Unsupported props: ".concat(t.join(",")));t=(t="".concat(e.env).toUpperCase())!=i.ENVIRONMENT.PRODUCTION&&(t==i.ENVIRONMENT.DEVELOPMENT||t==i.ENVIRONMENT.TEST)?i.ENVIRONMENT.DEVELOPMENT:i.ENVIRONMENT.PRODUCTION;return e.env=t,e.theme?e.theme="dark"==String(e.theme).toLowerCase()?"dark":"light":e.theme="light",p.prototype.config=s({bearer:i.BEARER.MERCHANT},e),p.prototype.utils=(0,a.utils)(),this}p.prototype.initializePay=function(){return t(this,void 0,void 0,function(){var t,n;return c(this,function(e){switch(e.label){case 0:if(Object.values(this.config).length<9)throw new Error("Konnadex Misconguration,Check initilization Parameters.");return t=(this.config.env||"").toUpperCase(),t=t!=i.ENVIRONMENT.PRODUCTION&&(t==i.ENVIRONMENT.DEVELOPMENT||t==i.ENVIRONMENT.TEST)?i.TEST_BACKEND_URL:i.LIVE_BACKEND_URL,[4,fetch(t)];case 1:return[4,e.sent().json()];case 2:if((t=e.sent())&&400<=t.status)throw new Error("Error in payment service");if(t.includes(String(this.config.currency).toUpperCase()))return n=["transfer"],n=p.prototype.utils.init({title:"KonnadexConfig",config:{key:this.config.key,reference:this.config.reference,metadata:this.config.metadata,amount:this.config.amount,bearer:this.config.bearer,cryptoCurrency:String(this.config.cryptoCurrency).toUpperCase(),currency:this.config.currency,network:this.config.network,env:this.config.env,theme:this.config.theme,transfer:!!this.config.defaultTab&&n.includes(this.config.defaultTab.toLowerCase())}}),p.prototype.iframe=n,p.prototype.onSuccess=this.config.onSuccess,p.prototype.onError=this.config.onError,p.prototype.onClose=this.config.onClose,this.openPay(),[2];throw new Error("Unsupported currency: ".concat(this.config.currency))}})})};var d=function(e,t){return e.filter(function(e){return!t.includes(e)})};p.prototype.openPay=function(){p.prototype.utils.openWidget({config:this.config}),p.prototype.eventHandler=function(e){if(e.data.appOrigin===this.origin)switch(e.data.type){case"ready":document.getElementById("pay-app-loader").style.display="none";break;case"konna.success":p.prototype.success(e.data);break;case"konna.exit":console.log(e.data.type),p.prototype.close(e.data);break;case"konna.error":p.prototype.error(e.data);break;case"konna.copy":"clipboard"in navigator?navigator.clipboard.writeText(e.data.data.RECIPIENT):document.execCommand("copy",!0,e.data.data.RECIPIENT)}}.bind(this),window.addEventListener("message",this.eventHandler,!1)},p.prototype.close=function(e){window.removeEventListener("message",this.eventHandler,!1),this.onClose(e),p.prototype.utils.closeWidget()},p.prototype.success=function(e){this.onSuccess(e)},p.prototype.error=function(e){this.onError(e)},window&&(window.KonnadexCheckout=p);const u=p}})();